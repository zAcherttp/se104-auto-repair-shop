ID,Test Case Description,Test Case Procedure,Expected Output,Inter-test case Dependence,Result,Test date,Note
PAY-1,Create payment updates vehicle total_paid,Create order (500k) → Create payment (200k) → Update vehicle.total_paid → Fetch vehicle,vehicle.total_paid=200k,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-2,Multiple payments accumulate,Create order (1M) → Pay 300k then 200k → Update vehicle totals → Verify,vehicle.total_paid=500k; 2 payments,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-3,Track payment methods,Create order → Insert 3 cash payments → Query methods,3 cash payments with amounts 100k/200k/300k,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-4,Debt calculation accuracy,Create order (1M) → Pay 400k → Fetch with joins → Compute,Remaining debt=600k,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-5,Fully paid vehicle has zero debt,Create order (500k) → Pay 500k → Fetch with joins,Debt=0,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-6,Excess payment detection (calc),Create order (500k) → Compute remaining → Compare with excessive amount,Excessive > remaining (calc only),None,Pass,2025-12-16,From modules/payments.test.ts
PAY-7,Chronological payment history,Create 3 payments on ascending dates → Query ordered asc,"Amounts 100k,200k,300k in order",None,Pass,2025-12-16,From modules/payments.test.ts
PAY-8,Link payments to creator,Create payment with `created_by` → Query,created_by matches user,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-9,Track debt across many orders,Create 3 orders (300k+400k+500k) → Pay 600k → Compute,Total=1.2M; Paid=600k; Debt=600k,None,Pass,2025-12-16,From modules/payments.test.ts
PAY-10,Disallow negative payment amount,Insert payment with amount -100k,Rejected (check_violation 23514),None,Expected Fail,2025-12-16,Spec for DB CHECK constraint
PAY-11,Disallow overpayment at DB level,Pay 200k on 300k debt then try another 200k,Second insert rejected by trigger,None,Expected Fail,2025-12-16,Spec for DB trigger